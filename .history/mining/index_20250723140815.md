<!-- 这是一个“多表格并列展示”的页面模板 -->
<script setup>
import dataIngot from '../data/json/锭.json';
import dataRare from '../data/json/稀土.json';

// 定义所有表格的信息，用于循环创建内容和导航
const tables = [
  {
    id: 'ingot-table',         // 用作锚点的唯一ID
    title: '锭',    // 表格的标题
    data: dataIngot,           // 绑定的数据
  },
  {
    id: 'rareearth-table',
    title: '稀土',
    data: dataRare,
  }
];

/**
 * 定义“锭”成本的计算逻辑
 * @param {number} level - 用户输入的等级
 * @returns {number} - 计算出的所需锭数
 */
function calculateIngotCost(level) {
  if (level <= 0) return 0;
  // 假设这是你的计算公式
  const cost = Math.ceil(Math.pow(level, 1.5) * 10 + 50);
  return cost;
}

// 计算函数
function calculateFireDamage(power) {
  return power * 12.5;
}
</script>

<div class="page-container">
  <div class="content-main">
      <div v-for="tableInfo in tables" :key="tableInfo.id">
      <h2 :id="tableInfo.id" class="section-title">{{ tableInfo.title }}</h2>
      <DynamicTable :data="tableInfo.data">
        <template #notes>
          <div v-if="tableInfo.id === 'rareearth-table'" class="notes-section">
            <!-- <h4>关于“稀土”的补充说明：</h4> -->
            <ul>
              <li>注：x为当前层数</li>
              <li>击碎时，获得2倍稀土，保持1秒击碎1次相当于+14.2层效率</li>
            </ul>
          </div>
          <div v-if="tableInfo.id === 'ingot-table'" class="notes-section">
            <Calculator
              title="升级成本计算器"
              input-label="输入目标等级:"
              placeholder="例如: 50"
              result-prefix="预计需要"
              result-suffix="个锭"
              :calculation-fn="calculateIngotCost"
            />
             <ul>
              <li>注：计算针对水晶强化点满的情况</li>
              <li></li>
            </ul>
          </div>
        </template>
      </DynamicTable>
    </div>
  </div>
</div>

<style>
.page-container {
  display: flex;
  flex-direction: row-reverse;
  gap: 2rem;
  align-items: flex-start;
}
.content-main {
  flex: 1;
  min-width: 0;
}
.content-aside {
  width: 220px;
  position: sticky;
  top: 80px;
}
@media (max-width: 960px) {
  .page-container { flex-direction: column; }
  .content-aside { width: 100%; position: static; margin-bottom: 2rem; }
}
.page-nav-card {
  background-color: var(--vp-c-bg-soft);
  border-radius: 12px;
  padding: 1rem 1.5rem;
  border: 1px solid var(--vp-c-divider);
}
.page-nav-card h3 {
  margin: 0 0 1rem 0;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--vp-c-divider);
  font-size: 1.1em;
}
.page-nav-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.page-nav-card li a {
  display: block;
  padding: 0.5rem 0;
  color: var(--vp-c-text-2);
  text-decoration: none;
  border-left: 2px solid transparent;
  padding-left: 1rem;
  transition: all 0.2s ease;
}
.page-nav-card li a:hover {
  color: var(--vp-c-brand);
  background-color: var(--vp-c-brand-soft);
  border-left-color: var(--vp-c-brand);
}
.section-title {
  font-size: 1.8em;
  padding-top: 2rem;
  margin-top: -2rem;
  border-bottom: 2px solid var(--vp-c-brand);
  padding-bottom: 0.5rem;
  margin-bottom: 2rem;
}
</style>