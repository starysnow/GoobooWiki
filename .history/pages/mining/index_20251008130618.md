---
pageClass: full-width-page
---
<!-- 页面：挖矿 -->
<script setup>
  // 1. 导入自动生成的索引文件
import { dataMap } from '../../.vitepress/theme/data-index.js';
import MiningFAQ from '@/text/mining-faq.md';

// 定义所有表格的信息，用于循环创建内容和导航
const tables = [
  // {
  //   id: 'scrap-durability-toughness-table',
  //   title: '废料&耐用性&韧性',
  //   data: dataMap['废料&耐用性&韧性']
  // },
  // {
  //   id: 'ore-table',
  //   title: '矿石',
  //   data: dataMap['矿石']
  // },
  // {
  //   id: 'mine1-normal-upgrades-table',
  //   title: '矿1常规升级',
  //   data: dataMap['矿1常规升级']
  // },
  // {
  //   id: 'mine1-crystal-upgrades-table',
  //   title: '矿1绿水晶升级',
  //   data: dataMap['矿1绿水晶升级']
  // },

  // {
  //   id: 'ingot-table',         // 用作锚点的唯一ID
  //   title: '锭',    // 表格的标题
  //   data: dataMap['锭'],           // 绑定的数据
  // },
  // {
  //   id: 'rareearth-table',
  //   title: '稀土',
  //   data: dataMap['稀土'],
  // },
  // {
  //   id: 'gas-smoke-table',
  //   title: '气体与烟雾',
  //   data: dataMap['气体与烟雾']
  // },
  // {
  //   id: 'gas-normal-upgrades-table',
  //   title: '气态常规升级',
  //   data: dataMap['气态常规升级']
  // },
  // {
  //   id: 'gas-crystal-upgrades-table',
  //   title: '气态水晶升级',
  //   data: dataMap['气态水晶升级']
  // },
  {
    id: 'modules-mining-upgrade-table',
    title: '升级',
    data: dataMap['modules/mining/upgrade']
  },
  {
    id: 'modules-mining-upgrade2-table',
    title: '气态升级',
    data: dataMap['modules/mining/upgrade2']
  },
  {
    id: 'modules-mining-upgradePrestige-table',
    title: '声望升级',
    data: dataMap['modules/mining/upgradePrestige']
  },
  // {
  //   id: 'modules-mining-upgradePremium-table',
  //   title: '高级升级',
  //   data: dataMap['modules/mining/upgradePremium']
  // },
  {
    id: 'modules-mining-relic-table',
    title: '圣遗物',
    data: dataMap['modules/mining/relic']
  },
  {
    id: 'modules-mining-ore-table',
    title: '矿石',
    data: dataMap['modules/mining/ore']
  },
  {
    id: 'modules-mining-enhancement-table',
    title: '强化',
    data: dataMap['modules/mining/enhancement']
  },
  // {
  //   id: 'modules-mining-card-table',
  //   title: '卡牌',
  //   data: dataMap['modules/mining/card']
  // },
  // {
  //   id: 'modules-mining-beacon-table',
  //   title: '信标',
  //   data: dataMap['modules/mining/beacon']
  // },
  // {
  //   id: 'modules-mining-achievement-table',
  //   title: '成就',
  //   data: dataMap['modules/mining/achievement']
  // },
];

// 计算函数
/**
 * 定义“锭”成本的计算逻辑
 * @param {number} level - 用户输入的等级
 * @returns {number} - 计算出的所需锭数
 */
function calculateIngotCost(level) {
  if (level <= 0) return 0;
  const rate = 3/3.386;
  let totalSum = 0;
  let currentTermValue = 10;
  for (let i = 0; i < level; i++) {
    const ceiledTerm = Math.ceil(currentTermValue);//向上取整
    totalSum += ceiledTerm;
    currentTermValue *= 1+rate;
  }
  return totalSum;
}

</script>

<!-- 21. 使用自定义布局组件 -->
<TwoSectionsLayout>
  <!-- 2. 向 "data-section" 插槽中填充内容 -->
  <template #data-section>
    <div v-for="tableInfo in tables" :key="tableInfo.id">
      <h3 :id="tableInfo.id">{{ tableInfo.title }}</h3>
      <DynamicTable :data="tableInfo.data">
      <!-- 动态表格，可添加注释或计算器等额外内容 -->
        <!-- 稀土表格注释 -->
        <template #notes>
          <div v-if="tableInfo.id === 'rareearth-table'">
            <ul>
              <li>注：x为当前层数</li>
              <li>击碎时，获得2倍稀土，保持1秒击碎1次相当于+14.2层效率</li>
            </ul>
          </div>
          <!-- 锭表格的注释和计算器 -->
          <div v-if="tableInfo.id === 'ingot-table'">
            <Calculator
              title="锭增强所需总数量"
              input-label="目标等级:"
              placeholder="例如: 5"
              result-prefix="预计需要"
              result-suffix="个锭"
              :calculation-fn="calculateIngotCost"
            />
            <ul style="margin-top: 1rem;">
              <li>注：计算针对水晶强化点满的情况</li>
            </ul>
          </div>
        </template>
      </DynamicTable>
    </div>
  </template>

  <!-- 3. 向 "faq-section" 插槽中填充内容 -->
  <template #faq-section>
    <MiningFAQ />
  </template>

</TwoSectionsLayout>

